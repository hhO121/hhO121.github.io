import{_ as e,a as t,b as o}from"./uni-icons.66689d21.js";import{j as i,o as l,c as a,w as n,a as s,n as r,b as u,d as c,g as d,F as h,r as p,a2 as m,a3 as f,i as y,e as g,k as b,t as S,l as x,$ as w}from"./index-0aeae8fb.js";import{r as _,_ as C}from"./uni-section.8d60c0c4.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";function I(e){let t="";for(let o in e){t+=`${o}:${e[o]};`}return t}const v=k({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let o in e)e[o]&&(t+=`${o} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return I({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return I({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("focus",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(t,o,g,b,S,x){const w=_(i("uni-icons"),e),C=m,k=f,I=y;return l(),a(I,{class:r(["uni-easyinput",{"uni-easyinput-error":x.msg}]),style:u(x.boxStyle)},{default:n((()=>[s(I,{class:r(["uni-easyinput__content",x.inputContentClass]),style:u(x.inputContentStyle)},{default:n((()=>[g.prefixIcon?(l(),a(w,{key:0,class:"content-clear-icon",type:g.prefixIcon,color:"#c0c4cc",onClick:o[0]||(o[0]=e=>x.onClickIcon("prefix")),size:"22"},null,8,["type"])):c("",!0),"textarea"===g.type?(l(),a(C,{key:1,class:r(["uni-easyinput__content-textarea",{"input-padding":g.inputBorder}]),name:g.name,value:S.val,placeholder:g.placeholder,placeholderStyle:g.placeholderStyle,disabled:g.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:x.inputMaxlength,focus:S.focused,autoHeight:g.autoHeight,"cursor-spacing":g.cursorSpacing,onInput:x.onInput,onBlur:x._Blur,onFocus:x._Focus,onConfirm:x.onConfirm,onKeyboardheightchange:x.onkeyboardheightchange},null,8,["class","name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","onInput","onBlur","onFocus","onConfirm","onKeyboardheightchange"])):(l(),a(k,{key:2,type:"password"===g.type?"text":g.type,class:"uni-easyinput__content-input",style:u(x.inputStyle),name:g.name,value:S.val,password:!S.showPassword&&"password"===g.type,placeholder:g.placeholder,placeholderStyle:g.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:g.disabled,maxlength:x.inputMaxlength,focus:S.focused,confirmType:g.confirmType,"cursor-spacing":g.cursorSpacing,onFocus:x._Focus,onBlur:x._Blur,onInput:x.onInput,onConfirm:x.onConfirm,onKeyboardheightchange:x.onkeyboardheightchange},null,8,["type","style","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","onFocus","onBlur","onInput","onConfirm","onKeyboardheightchange"])),"password"===g.type&&g.passwordIcon?(l(),d(h,{key:3},[x.isVal?(l(),a(w,{key:0,class:r(["content-clear-icon",{"is-textarea-icon":"textarea"===g.type}]),type:S.showPassword?"eye-slash-filled":"eye-filled",size:22,color:S.focusShow?g.primaryColor:"#c0c4cc",onClick:x.onEyes},null,8,["class","type","color","onClick"])):c("",!0)],64)):g.suffixIcon?(l(),d(h,{key:4},[g.suffixIcon?(l(),a(w,{key:0,class:"content-clear-icon",type:g.suffixIcon,color:"#c0c4cc",onClick:o[1]||(o[1]=e=>x.onClickIcon("suffix")),size:"22"},null,8,["type"])):c("",!0)],64)):(l(),d(h,{key:5},[g.clearable&&x.isVal&&!g.disabled&&"textarea"!==g.type?(l(),a(w,{key:0,class:r(["content-clear-icon",{"is-textarea-icon":"textarea"===g.type}]),type:"clear",size:g.clearSize,color:x.msg?"#dd524d":S.focusShow?g.primaryColor:"#c0c4cc",onClick:x.onClear},null,8,["class","size","color","onClick"])):c("",!0)],64)),p(t.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}],["__scopeId","data-v-a08716d2"]]);const $=k({name:"UniNoticeBar",emits:["click","getmore","close"],props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#FFF9EA"},speed:{type:Number,default:100},color:{type:String,default:"#FF9A43"},fontSize:{type:Number,default:14},moreColor:{type:String,default:"#FF9A43"},single:{type:[Boolean,String],default:!1},scrollable:{type:[Boolean,String],default:!1},showIcon:{type:[Boolean,String],default:!1},showGetMore:{type:[Boolean,String],default:!1},showClose:{type:[Boolean,String],default:!1}},data:()=>({textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,elIdBox:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}),computed:{isShowGetMore(){return!0===this.showGetMore||"true"===this.showGetMore},isShowClose(){return!(!0!==this.showClose&&"true"!==this.showClose||!1!==this.showGetMore&&"false"!==this.showGetMore)}},mounted(){this.$nextTick((()=>{this.initSize()}))},methods:{initSize(){if(this.scrollable){let e=[],t=new Promise(((e,t)=>{g().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.textWidth=t[0].width,e()}))})),o=new Promise(((e,t)=>{g().in(this).select(`#${this.elIdBox}`).boundingClientRect().exec((t=>{this.boxWidth=t[0].width,e()}))}));e.push(t),e.push(o),Promise.all(e).then((()=>{this.animationDuration=this.textWidth/this.speed+"s",this.animationDelay=`-${this.boxWidth/this.speed}s`,setTimeout((()=>{this.animationPlayState="running"}),1e3)}))}},loopAnimation(){},clickMore(){this.$emit("getmore")},close(){this.show=!1,this.$emit("close")},onClick(){this.$emit("click")}}},[["render",function(t,o,d,h,p,m){const f=_(i("uni-icons"),e),g=x,w=y;return p.show?(l(),a(w,{key:0,class:"uni-noticebar",style:u({backgroundColor:d.backgroundColor}),onClick:m.onClick},{default:n((()=>[!0===d.showIcon||"true"===d.showIcon?(l(),a(f,{key:0,class:"uni-noticebar-icon",type:"sound",color:d.color,size:1.5*d.fontSize},null,8,["color","size"])):c("",!0),s(w,{ref:"textBox",class:r(["uni-noticebar__content-wrapper",{"uni-noticebar__content-wrapper--scrollable":d.scrollable,"uni-noticebar__content-wrapper--single":!d.scrollable&&(d.single||d.moreText)}]),style:u({height:d.scrollable?1.5*d.fontSize+"px":"auto"})},{default:n((()=>[s(w,{id:p.elIdBox,class:r(["uni-noticebar__content",{"uni-noticebar__content--scrollable":d.scrollable,"uni-noticebar__content--single":!d.scrollable&&(d.single||d.moreText)}])},{default:n((()=>[s(g,{id:p.elId,ref:"animationEle",class:r(["uni-noticebar__content-text",{"uni-noticebar__content-text--scrollable":d.scrollable,"uni-noticebar__content-text--single":!d.scrollable&&(d.single||d.showGetMore)}]),style:u({color:d.color,fontSize:d.fontSize+"px",lineHeight:1.5*d.fontSize+"px",width:p.wrapWidth+"px",animationDuration:p.animationDuration,"-webkit-animationDuration":p.animationDuration,animationPlayState:p.webviewHide?"paused":p.animationPlayState,"-webkit-animationPlayState":p.webviewHide?"paused":p.animationPlayState,animationDelay:p.animationDelay,"-webkit-animationDelay":p.animationDelay})},{default:n((()=>[b(S(d.text),1)])),_:1},8,["id","class","style"])])),_:1},8,["id","class"])])),_:1},8,["class","style"]),m.isShowGetMore?(l(),a(w,{key:1,class:"uni-noticebar__more uni-cursor-point",onClick:m.clickMore},{default:n((()=>[d.moreText.length>0?(l(),a(g,{key:0,style:u({color:d.moreColor,fontSize:d.fontSize+"px"})},{default:n((()=>[b(S(d.moreText),1)])),_:1},8,["style"])):(l(),a(f,{key:1,type:"right",color:d.moreColor,size:1.1*d.fontSize},null,8,["color","size"]))])),_:1},8,["onClick"])):c("",!0),m.isShowClose?(l(),a(w,{key:2,class:"uni-noticebar-close uni-cursor-point"},{default:n((()=>[s(f,{type:"closeempty",color:d.color,size:1.1*d.fontSize,onClick:m.close},null,8,["color","size","onClick"])])),_:1})):c("",!0)])),_:1},8,["style","onClick"])):c("",!0)}],["__scopeId","data-v-69ae3424"]]),M={Add:function(e,t){e=e?e.toString():"0",t=t?t.toString():"0";let o=e.split("."),i=t.split("."),l=2===o.length?o[1]:"",a=2===i.length?i[1]:"",n=Math.max(l.length,a.length),s=Math.pow(10,n),r=Number(((e*s+t*s)/s).toFixed(n)),u=arguments[2];return"number"==typeof u?Number(r.toFixed(u)):r},Sub:function(e,t){return M.Add(e,-Number(t),arguments[2])},Mul:function(e,t){let o,i,l=e?e.toString():"0",a=t?t.toString():"0",n=arguments[2];return o=(l.split(".")[1]?l.split(".")[1].length:0)+(a.split(".")[1]?a.split(".")[1].length:0),i=Number(l.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,o),Number("number"!=typeof n?i:i.toFixed(parseInt(n)))},Div:function(e,t){let o,i,l=e.toString(),a=t.toString(),n=arguments[2];return o=(a.split(".")[1]?a.split(".")[1].length:0)-(l.split(".")[1]?l.split(".")[1].length:0),i=Number(l.replace(".",""))/Number(a.replace(".",""))*Math.pow(10,o),Number("number"!=typeof n?i:i.toFixed(parseInt(n)))}};const V=k({data:()=>({str:"",data:{totalSalary:null,bonus:null,paid:null,additional:null,defaultDeduction:6e4,feiyong:null},formula:[{max:36e3,min:0,taxRate:.03,deduction:0},{max:144e3,min:36e3,taxRate:.1,deduction:2520},{max:3e5,min:144e3,taxRate:.2,deduction:16920},{max:42e4,min:3e5,taxRate:.25,deduction:31920},{max:66e4,min:42e4,taxRate:.3,deduction:52920},{max:96e4,min:66e4,taxRate:.35,deduction:85920},{max:1/0,min:96e4,taxRate:.45,deduction:181920}]}),onLoad(){},methods:{roundToDecimal(e,t){let o=Math.pow(10,t);return Math.round(e*o)/o},handleCalculation(){const e=M.Sub(M.Sub(M.Sub(M.Sub(this.data.totalSalary,this.data.bonus),this.data.additional),this.data.defaultDeduction),this.data.feiyong);if(e>0){let t=this.formula.find((t=>e>t.min&&e<t.max));t=t||this.formula[0];const o=this.roundToDecimal(M.Sub(M.Mul(e,t.taxRate),t.deduction),2),i=M.Sub(this.data.paid,o);this.str=i<0?"gg，大概需要补税："+-i:"恭喜，大概可以退税："+i}else this.str="恭喜，大概可以全额退税："+this.data.paid}}},[["render",function(r,u,p,m,f,g){const b=_(i("uni-easyinput"),v),S=_(i("uni-forms-item"),t),x=_(i("uni-forms"),o),k=_(i("uni-icons"),e),I=y,M=_(i("uni-section"),C),V=w,B=_(i("uni-notice-bar"),$);return l(),d(h,null,[s(V,null,{default:n((()=>[s(M,{title:"应退税计算(年终奖单独计算---不含稿费,劳务报酬)",type:"line",padding:""},{default:n((()=>[s(x,{ref:"form",modelValue:f.data},{default:n((()=>[s(S,{label:"收入合计",name:"totalSalary"},{default:n((()=>[s(b,{type:"number",modelValue:f.data.totalSalary,"onUpdate:modelValue":u[0]||(u[0]=e=>f.data.totalSalary=e),placeholder:"请输入收入合计"},null,8,["modelValue"])])),_:1}),s(S,{label:"年终奖",name:"bonus"},{default:n((()=>[s(b,{type:"number",modelValue:f.data.bonus,"onUpdate:modelValue":u[1]||(u[1]=e=>f.data.bonus=e),placeholder:"请输入年终奖"},null,8,["modelValue"])])),_:1}),s(S,{label:"已缴税额",name:"paid"},{default:n((()=>[s(b,{type:"number",modelValue:f.data.paid,"onUpdate:modelValue":u[2]||(u[2]=e=>f.data.paid=e),placeholder:"请输入已缴纳税额"},null,8,["modelValue"])])),_:1}),s(S,{label:"附加扣除",name:"additional"},{default:n((()=>[s(b,{type:"number",modelValue:f.data.additional,"onUpdate:modelValue":u[3]||(u[3]=e=>f.data.additional=e),placeholder:"请输入附加扣除"},null,8,["modelValue"])])),_:1}),s(S,{label:"默认减除",name:"defaultDeduction"},{default:n((()=>[s(b,{type:"number",modelValue:f.data.defaultDeduction,"onUpdate:modelValue":u[4]||(u[4]=e=>f.data.defaultDeduction=e),placeholder:"请输入减除费用"},null,8,["modelValue"])])),_:1}),s(S,{label:"费用合计",name:"feiyong"},{default:n((()=>[s(b,{type:"number",modelValue:f.data.feiyong,"onUpdate:modelValue":u[5]||(u[5]=e=>f.data.feiyong=e),placeholder:"请输入费用合计(自行计算,稿费劳务费低影响不大)"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),s(I,{class:"uni-btn-v"},{default:n((()=>[s(k,{onClick:u[6]||(u[6]=e=>r.show=!0),type:"hand-up-filled",size:"30"})])),_:1})])),_:1})])),_:1}),f.str?(l(),a(B,{key:0,scrollable:"",single:"",text:f.str},null,8,["text"])):c("",!0),s(I,{class:"uni-btn-v"},{default:n((()=>[s(k,{onClick:g.handleCalculation,type:"hand-up-filled",size:"30"},null,8,["onClick"])])),_:1})],64)}],["__scopeId","data-v-686c3352"]]);export{V as default};
