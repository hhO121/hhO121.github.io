import{G as t,H as a,I as e,c as s,w as l,i as d,o as i,a as u,l as o,t as n,h as r,j as m,F as c,d as h,a4 as f,m as _,a3 as p,X as P,a5 as D}from"./index-C1Z5Lwap.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=b({data:()=>({currentFunds:0,totalPaid:0,totalDue:0,cardList:[],isModalVisible:!1,cardName:"",date:"",amountPaid:0,amountDue:0,isEdit:!1,editingIndex:null,startPressIndex:null,pressTimer:null}),methods:{openModal(){this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.resetModal()},resetModal(){this.cardName="",this.date="",this.amountPaid=0,this.amountDue=0,this.isEdit=!1,this.editingIndex=null},submitCard(){const t={cardName:this.cardName,date:this.date,amountPaid:this.amountPaid,amountDue:this.amountDue};this.isEdit?(this.totalDue-=parseFloat(this.cardList[this.editingIndex].amountDue),this.cardList.splice(this.editingIndex,1,t),this.totalPaid-=parseFloat(this.cardList[this.editingIndex].amountPaid),this.totalPaid+=this.amountPaid,this.totalDue+=this.amountDue):(this.cardList.push(t),this.totalPaid+=this.amountPaid,this.totalDue+=this.amountDue),this.updateRemainingFunds(),this.closeModal(),this.saveData()},editCard(t,a){console.log("item, index: ",t,a),this.cardName=t.cardName,this.date=t.date,this.amountPaid=t.amountPaid,this.amountDue=t.amountDue,this.isEdit=!0,this.editingIndex=a,this.openModal()},startPress(t){this.startPressIndex=t,this.pressTimer=setTimeout((()=>{this.startPressIndex===t&&this.deleteCard(t)}),800)},endPress(){clearTimeout(this.pressTimer)},deleteCard(t){confirm("确认删除此条记录？")&&(this.totalPaid-=parseFloat(this.cardList[t].amountPaid),this.totalDue-=parseFloat(this.cardList[t].amountDue),this.cardList.splice(t,1),this.updateRemainingFunds(),this.saveData())},updateRemainingFunds(){this.remainingFunds=this.currentFunds-this.totalPaid},saveData(){t("creditCards",this.cardList)},loadData(){const t=a("creditCards");t&&(this.cardList=t,this.totalPaid=this.cardList.reduce(((t,a)=>t+a.amountPaid),0),this.totalDue=this.cardList.reduce(((t,a)=>t+a.amountDue),0),this.updateRemainingFunds())},clearLocalStorage(){confirm("确认清空本地数据？")&&(e("creditCards"),this.cardList=[],this.totalPaid=0,this.totalDue=0,this.updateRemainingFunds())}},mounted(){this.loadData()}},[["render",function(t,a,e,b,C,x){const F=f,g=_,y=d,L=p,V=P,M=D;return i(),s(y,{class:"container"},{default:l((()=>[u(y,{class:"header"},{default:l((()=>[u(F,{class:"add-button",onClick:x.openModal},{default:l((()=>[o("添加信用卡")])),_:1},8,["onClick"]),u(y,{class:"amount-summary"},{default:l((()=>[u(y,null,{default:l((()=>[u(g,null,{default:l((()=>[o(" 已出账总和: "),u(g,{class:"amount"},{default:l((()=>[o(n(Number(C.totalPaid.toFixed(2))),1)])),_:1}),o(" 元 ")])),_:1})])),_:1}),u(y,null,{default:l((()=>[u(g,null,{default:l((()=>[o(" 未出账总和: "),u(g,{class:"amount"},{default:l((()=>[o(n(Number(C.totalDue.toFixed(2))),1)])),_:1}),o(" 元 ")])),_:1})])),_:1}),u(y,null,{default:l((()=>[u(g,null,{default:l((()=>[o(" 总和: "),u(g,{class:"amount"},{default:l((()=>[o(n(Number((C.totalPaid+C.totalDue).toFixed(2))),1)])),_:1}),o(" 元 ")])),_:1})])),_:1})])),_:1})])),_:1}),u(y,{class:"table"},{default:l((()=>[u(y,{class:"table-header"},{default:l((()=>[u(g,{style:{width:"29%"}},{default:l((()=>[o("信用卡名称")])),_:1}),u(g,{style:{width:"27%"}},{default:l((()=>[o("出账金额")])),_:1}),u(g,{style:{width:"29%"}},{default:l((()=>[o("未出账金额")])),_:1}),u(g,{style:{width:"15%"}},{default:l((()=>[o("还款日")])),_:1})])),_:1}),u(L,{"scroll-y":!0},{default:l((()=>[u(y,{class:"table-body"},{default:l((()=>[(i(!0),r(c,null,m(C.cardList,((t,a)=>(i(),s(y,{key:a,onClick:e=>x.editCard(t,a),onTouchstart:t=>x.startPress(a),onTouchend:x.endPress,class:"table-row"},{default:l((()=>[u(g,{style:{width:"29%"}},{default:l((()=>[o(n(t.cardName),1)])),_:2},1024),u(g,{style:{width:"27%"}},{default:l((()=>[o(n(Number(t.amountPaid.toFixed(2))),1)])),_:2},1024),u(g,{style:{width:"29%"}},{default:l((()=>[o(n(Number(t.amountDue.toFixed(2))),1)])),_:2},1024),u(g,{style:{width:"15%"}},{default:l((()=>[o(n(t.date),1)])),_:2},1024)])),_:2},1032,["onClick","onTouchstart","onTouchend"])))),128))])),_:1})])),_:1})])),_:1}),C.isModalVisible?(i(),s(y,{key:0,class:"modal"},{default:l((()=>[u(y,{class:"modal-content"},{default:l((()=>[u(y,null,{default:l((()=>[u(g,{class:"modal-title"},{default:l((()=>[o(n(C.isEdit?"编辑信用卡":"添加信用卡"),1)])),_:1}),u(g,{class:"close-button",onClick:x.closeModal},{default:l((()=>[o("×")])),_:1},8,["onClick"])])),_:1}),u(y,null,{default:l((()=>[u(V,null,{default:l((()=>[o("信用卡名称:")])),_:1}),u(M,{modelValue:C.cardName,"onUpdate:modelValue":a[0]||(a[0]=t=>C.cardName=t),class:"modal-input",placeholder:"输入信用卡名称"},null,8,["modelValue"])])),_:1}),u(y,null,{default:l((()=>[u(V,null,{default:l((()=>[o("出账金额:")])),_:1}),u(M,{modelValue:C.amountPaid,"onUpdate:modelValue":a[1]||(a[1]=t=>C.amountPaid=t),modelModifiers:{number:!0},type:"number",class:"modal-input",placeholder:"输入出账金额"},null,8,["modelValue"])])),_:1}),u(y,null,{default:l((()=>[u(V,null,{default:l((()=>[o("未出账金额:")])),_:1}),u(M,{modelValue:C.amountDue,"onUpdate:modelValue":a[2]||(a[2]=t=>C.amountDue=t),modelModifiers:{number:!0},type:"number",class:"modal-input",placeholder:"输入未出账金额"},null,8,["modelValue"])])),_:1}),u(y,null,{default:l((()=>[u(V,null,{default:l((()=>[o("还款日:")])),_:1}),u(M,{modelValue:C.date,"onUpdate:modelValue":a[3]||(a[3]=t=>C.date=t),modelModifiers:{number:!0},type:"number",class:"modal-input",placeholder:"输入还款日"},null,8,["modelValue"])])),_:1}),u(F,{class:"submit-button",onClick:x.submitCard},{default:l((()=>[o(n(C.isEdit?"确认修改":"确认添加"),1)])),_:1},8,["onClick"])])),_:1})])),_:1})):h("",!0),C.cardList.length>0?(i(),s(g,{key:1,class:"close-button",onClick:x.clearLocalStorage},{default:l((()=>[o("×")])),_:1},8,["onClick"])):h("",!0)])),_:1})}],["__scopeId","data-v-4a87ea13"]]);export{C as default};
