{"version":3,"file":"js/340-legacy.d5ddc9c6.js","mappings":"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","sources":["webpack://wisdom_park_visitor/./src/views/visitor/temporary-visitor/temporaryVisitorReg.vue?4cc3","webpack://wisdom_park_visitor/./src/views/visitor/temporary-visitor/temporaryVisitorReg.vue?efe9","webpack://wisdom_park_visitor/./src/views/visitor/temporary-visitor/temporaryVisitorReg.vue","webpack://wisdom_park_visitor/./node_modules/core-js/modules/es.array.find.js","webpack://wisdom_park_visitor/src/views/visitor/temporary-visitor/temporaryVisitorReg.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-sticky',{attrs:{\"offset-top\":0.00000001}},[_c('van-nav-bar',{attrs:{\"title\":\"临时访客登记\",\"left-arrow\":\"\",\"right-text\":!_vm.params.disabled ? '保存' : ''},on:{\"click-left\":_vm.onClickLeft,\"click-right\":function($event){return _vm.$refs.visitorInfo.submit()}}})],1),_c('div',{staticClass:\"edit-form\"},[_c('div',{staticClass:\"tag-title\"},[_vm._v(\"拜访信息\")]),_c('van-form',{ref:\"visitorInfo\",attrs:{\"show-error\":false,\"model\":_vm.visitorInfo,\"readonly\":_vm.params.disabled},on:{\"submit\":_vm.handleSubmit}},[_c('div',{staticClass:\"visitor-info\"},[_c('van-field',{attrs:{\"name\":\"visitorReason\",\"required\":\"\",\"label\":\"拜访事由\",\"maxlength\":\"50\",\"placeholder\":\"请输入拜访事由\",\"rules\":[{ required: true, message: '请输入拜访事由' }]},model:{value:(_vm.visitorInfo.visitorReason),callback:function ($$v) {_vm.$set(_vm.visitorInfo, \"visitorReason\", $$v)},expression:\"visitorInfo.visitorReason\"}}),_c('van-field',{attrs:{\"required\":\"\",\"readonly\":\"\",\"name\":\"visitStartTime\",\"disabled\":!_vm.params.disabled,\"label\":\"拜访开始\",\"placeholder\":\"请选择开始时间\",\"rules\":[{ required: true, message: '请选择开始时间' }]},model:{value:(_vm.visitorInfo.visitStartTime),callback:function ($$v) {_vm.$set(_vm.visitorInfo, \"visitStartTime\", $$v)},expression:\"visitorInfo.visitStartTime\"}}),_c('van-field',{attrs:{\"clickable\":!_vm.params.disabled,\"required\":\"\",\"readonly\":\"\",\"name\":\"visitEndTime\",\"label\":\"拜访结束\",\"placeholder\":\"请选择结束时间\",\"rules\":[{ required: true, message: '请选择结束时间' }]},on:{\"click\":function($event){if (!_vm.params.disabled) {\n              _vm.showPickerEnd = true\n            }}},model:{value:(_vm.visitorInfo.visitEndTime),callback:function ($$v) {_vm.$set(_vm.visitorInfo, \"visitEndTime\", $$v)},expression:\"visitorInfo.visitEndTime\"}}),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showPickerEnd),callback:function ($$v) {_vm.showPickerEnd=$$v},expression:\"showPickerEnd\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"datetime\",\"min-date\":_vm.disabledTime('endMin'),\"max-date\":_vm.disabledTime('endMax')},on:{\"confirm\":_vm.onConfirmEnd,\"cancel\":function($event){_vm.showPickerEnd = false}}})],1),_c('van-field',{attrs:{\"name\":\"name\",\"required\":\"\",\"label\":\"被拜访者\",\"maxlength\":\"10\",\"placeholder\":\"请填写被拜访者\",\"rules\":[{ required: true, message: '请填写被拜访者' }]},model:{value:(_vm.visitorInfo.name),callback:function ($$v) {_vm.$set(_vm.visitorInfo, \"name\", $$v)},expression:\"visitorInfo.name\"}}),_c('van-field',{attrs:{\"name\":\"phoneNbr\",\"required\":\"\",\"type\":\"digit\",\"label\":\"被访者手机\",\"maxlength\":\"11\",\"placeholder\":\"请填写被访者手机\",\"rules\":[\n            { required: true, message: '请填写被访者手机' },\n            {\n              pattern:\n                /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/,\n              message: '请输入正确格式的手机号码'\n            }\n          ]},model:{value:(_vm.visitorInfo.phoneNbr),callback:function ($$v) {_vm.$set(_vm.visitorInfo, \"phoneNbr\", $$v)},expression:\"visitorInfo.phoneNbr\"}})],1),_c('div',{staticClass:\"tag-title\"},[_vm._v(\"详细信息\")]),_c('div',{staticClass:\"visitor-info\"},[_c('van-field',{attrs:{\"name\":\"fileList\",\"label\":\"人脸上传\"},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('van-uploader',{attrs:{\"readonly\":_vm.params.disabled,\"deletable\":!_vm.params.disabled,\"before-read\":_vm.beforeRead,\"accept\":\"image/jpeg,image/jpg,image/png\",\"max-count\":1},on:{\"delete\":function($event){_vm.userInfo.picData = ''}},model:{value:(_vm.userInfo.fileList),callback:function ($$v) {_vm.$set(_vm.userInfo, \"fileList\", $$v)},expression:\"userInfo.fileList\"}})]},proxy:true}])}),_c('van-field',{attrs:{\"placeholder\":\"请填写访客姓名\",\"name\":\"visitorName\",\"label\":\"访客姓名\",\"required\":\"\",\"maxlength\":\"8\",\"rules\":[{ required: true, message: '请填写访客姓名' }]},model:{value:(_vm.userInfo.visitorName),callback:function ($$v) {_vm.$set(_vm.userInfo, \"visitorName\", $$v)},expression:\"userInfo.visitorName\"}}),_c('van-field',{attrs:{\"readonly\":\"\",\"disabled\":!_vm.params.disabled,\"name\":\"visitorPhoneNbr\",\"label\":\"手机号码\",\"required\":\"\",\"placeholder\":\"请填写访客手机号码\",\"type\":\"tel\",\"maxlength\":\"11\",\"rules\":[\n            { required: true, message: '请填写访客手机号码' },\n            {\n              pattern:\n                /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/,\n              message: '请输入正确格式的手机号码'\n            }\n          ]},model:{value:(_vm.userInfo.visitorPhoneNbr),callback:function ($$v) {_vm.$set(_vm.userInfo, \"visitorPhoneNbr\", $$v)},expression:\"userInfo.visitorPhoneNbr\"}}),_c('van-field',{attrs:{\"clickable\":!_vm.params.disabled,\"readonly\":\"\",\"name\":\"voucherTypeName\",\"label\":\"证件类型\",\"placeholder\":\"请选择证件类型\"},on:{\"click\":function($event){if (!_vm.params.disabled) {\n              _vm.showPickerType = true\n            }}},model:{value:(_vm.userInfo.voucherTypeName),callback:function ($$v) {_vm.$set(_vm.userInfo, \"voucherTypeName\", $$v)},expression:\"userInfo.voucherTypeName\"}}),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showPickerType),callback:function ($$v) {_vm.showPickerType=$$v},expression:\"showPickerType\"}},[_c('van-picker',{attrs:{\"title\":\"证件类型\",\"show-toolbar\":\"\",\"columns\":_vm.showPickerTypeList.map(function (item) { return item.dicDisplay; })},on:{\"cancel\":function($event){_vm.showPickerType = false},\"confirm\":_vm.onConfirmType}})],1),_c('van-field',{attrs:{\"readonly\":_vm.userInfo.voucherTypeName === '身份证' || _vm.params.disabled,\"clickable\":!_vm.params.disabled,\"name\":\"voucherCode\",\"label\":\"证件号码\",\"maxlength\":\"50\",\"placeholder\":\"请填写访客证件号码\"},on:{\"click\":function($event){if (!_vm.params.disabled && _vm.userInfo.voucherTypeName === '身份证') {\n              _vm.numberShow = true\n            }}},model:{value:(_vm.userInfo.voucherCode),callback:function ($$v) {_vm.$set(_vm.userInfo, \"voucherCode\", $$v)},expression:\"userInfo.voucherCode\"}}),_c('van-number-keyboard',{attrs:{\"show\":_vm.numberShow,\"extra-key\":\"X\",\"close-button-text\":\"完成\"},on:{\"blur\":function($event){_vm.numberShow = false},\"input\":function (val) {\n              _vm.userInfo.voucherCode = _vm.userInfo.voucherCode + val\n            },\"delete\":function($event){_vm.userInfo.voucherCode = _vm.userInfo.voucherCode.substr(\n              0,\n              _vm.userInfo.voucherCode.length - 1\n            )}}}),_c('van-field',{attrs:{\"name\":\"visitSex\",\"label\":\"访客性别\"},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('van-radio-group',{attrs:{\"disabled\":_vm.params.disabled,\"direction\":\"horizontal\"},model:{value:(_vm.userInfo.visitSex),callback:function ($$v) {_vm.$set(_vm.userInfo, \"visitSex\", $$v)},expression:\"userInfo.visitSex\"}},_vm._l((_vm.visitSexList),function(item){return _c('van-radio',{key:item.dicValue,attrs:{\"name\":item.dicValue}},[_vm._v(_vm._s(item.dicDisplay))])}),1)]},proxy:true}])}),_c('van-field',{attrs:{\"name\":\"plate\",\"label\":\"车牌号码\",\"maxlength\":\"8\",\"placeholder\":\"请填写访客车牌号码\"},model:{value:(_vm.userInfo.plate),callback:function ($$v) {_vm.$set(_vm.userInfo, \"plate\", $$v)},expression:\"userInfo.plate\"}}),_c('van-field',{attrs:{\"name\":\"carryArticle\",\"label\":\"携带物品\",\"maxlength\":\"100\",\"placeholder\":\"请填写访客携带物品\"},model:{value:(_vm.userInfo.carryArticle),callback:function ($$v) {_vm.$set(_vm.userInfo, \"carryArticle\", $$v)},expression:\"userInfo.carryArticle\"}}),_c('van-field',{attrs:{\"name\":\"remark\",\"label\":\"备注\",\"rows\":\"2\",\"autosize\":\"\",\"type\":\"textarea\",\"show-word-limit\":\"\",\"maxlength\":\"100\",\"placeholder\":\"请填写备注\"},model:{value:(_vm.userInfo.remark),callback:function ($$v) {_vm.$set(_vm.userInfo, \"remark\", $$v)},expression:\"userInfo.remark\"}})],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./temporaryVisitorReg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./temporaryVisitorReg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./temporaryVisitorReg.vue?vue&type=template&id=0a4b0aa3&scoped=true&\"\nimport script from \"./temporaryVisitorReg.vue?vue&type=script&lang=js&\"\nexport * from \"./temporaryVisitorReg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./temporaryVisitorReg.vue?vue&type=style&index=0&id=0a4b0aa3&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a4b0aa3\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","<template>\r\n  <div>\r\n    <van-sticky :offset-top=\"0.00000001\">\r\n      <van-nav-bar\r\n        title=\"临时访客登记\"\r\n        left-arrow\r\n        @click-left=\"onClickLeft\"\r\n        :right-text=\"!params.disabled ? '保存' : ''\"\r\n        @click-right=\"$refs.visitorInfo.submit()\"\r\n      />\r\n    </van-sticky>\r\n    <!-- 主页面 -->\r\n    <div class=\"edit-form\">\r\n      <div class=\"tag-title\">拜访信息</div>\r\n      <van-form\r\n        :show-error=\"false\"\r\n        :model=\"visitorInfo\"\r\n        ref=\"visitorInfo\"\r\n        @submit=\"handleSubmit\"\r\n        :readonly=\"params.disabled\"\r\n      >\r\n        <div class=\"visitor-info\">\r\n          <van-field\r\n            name=\"visitorReason\"\r\n            v-model=\"visitorInfo.visitorReason\"\r\n            required\r\n            label=\"拜访事由\"\r\n            maxlength=\"50\"\r\n            placeholder=\"请输入拜访事由\"\r\n            :rules=\"[{ required: true, message: '请输入拜访事由' }]\"\r\n          />\r\n          <van-field\r\n            required\r\n            readonly\r\n            name=\"visitStartTime\"\r\n            :disabled=\"!params.disabled\"\r\n            v-model=\"visitorInfo.visitStartTime\"\r\n            label=\"拜访开始\"\r\n            placeholder=\"请选择开始时间\"\r\n            :rules=\"[{ required: true, message: '请选择开始时间' }]\"\r\n          />\r\n          <van-field\r\n            :clickable=\"!params.disabled\"\r\n            @click=\"\r\n              if (!params.disabled) {\r\n                showPickerEnd = true\r\n              }\r\n            \"\r\n            required\r\n            readonly\r\n            name=\"visitEndTime\"\r\n            v-model=\"visitorInfo.visitEndTime\"\r\n            label=\"拜访结束\"\r\n            placeholder=\"请选择结束时间\"\r\n            :rules=\"[{ required: true, message: '请选择结束时间' }]\"\r\n          />\r\n          <van-popup v-model=\"showPickerEnd\" position=\"bottom\">\r\n            <van-datetime-picker\r\n              type=\"datetime\"\r\n              @confirm=\"onConfirmEnd\"\r\n              @cancel=\"showPickerEnd = false\"\r\n              :min-date=\"disabledTime('endMin')\"\r\n              :max-date=\"disabledTime('endMax')\"\r\n            />\r\n          </van-popup>\r\n          <van-field\r\n            v-model=\"visitorInfo.name\"\r\n            name=\"name\"\r\n            required\r\n            label=\"被拜访者\"\r\n            maxlength=\"10\"\r\n            placeholder=\"请填写被拜访者\"\r\n            :rules=\"[{ required: true, message: '请填写被拜访者' }]\"\r\n          />\r\n          <van-field\r\n            v-model=\"visitorInfo.phoneNbr\"\r\n            name=\"phoneNbr\"\r\n            required\r\n            type=\"digit\"\r\n            label=\"被访者手机\"\r\n            maxlength=\"11\"\r\n            placeholder=\"请填写被访者手机\"\r\n            :rules=\"[\r\n              { required: true, message: '请填写被访者手机' },\r\n              {\r\n                pattern:\r\n                  /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/,\r\n                message: '请输入正确格式的手机号码'\r\n              }\r\n            ]\"\r\n          />\r\n        </div>\r\n        <div class=\"tag-title\">详细信息</div>\r\n        <div class=\"visitor-info\">\r\n          <van-field name=\"fileList\" label=\"人脸上传\">\r\n            <template #input>\r\n              <van-uploader\r\n                :readonly=\"params.disabled\"\r\n                :deletable=\"!params.disabled\"\r\n                @delete=\"userInfo.picData = ''\"\r\n                v-model=\"userInfo.fileList\"\r\n                :before-read=\"beforeRead\"\r\n                accept=\"image/jpeg,image/jpg,image/png\"\r\n                :max-count=\"1\"\r\n              />\r\n            </template>\r\n          </van-field>\r\n          <van-field\r\n            v-model=\"userInfo.visitorName\"\r\n            placeholder=\"请填写访客姓名\"\r\n            name=\"visitorName\"\r\n            label=\"访客姓名\"\r\n            required\r\n            maxlength=\"8\"\r\n            :rules=\"[{ required: true, message: '请填写访客姓名' }]\"\r\n          />\r\n          <van-field\r\n            readonly\r\n            :disabled=\"!params.disabled\"\r\n            v-model=\"userInfo.visitorPhoneNbr\"\r\n            name=\"visitorPhoneNbr\"\r\n            label=\"手机号码\"\r\n            required\r\n            placeholder=\"请填写访客手机号码\"\r\n            type=\"tel\"\r\n            maxlength=\"11\"\r\n            :rules=\"[\r\n              { required: true, message: '请填写访客手机号码' },\r\n              {\r\n                pattern:\r\n                  /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/,\r\n                message: '请输入正确格式的手机号码'\r\n              }\r\n            ]\"\r\n          />\r\n          <van-field\r\n            :clickable=\"!params.disabled\"\r\n            @click=\"\r\n              if (!params.disabled) {\r\n                showPickerType = true\r\n              }\r\n            \"\r\n            readonly\r\n            name=\"voucherTypeName\"\r\n            v-model=\"userInfo.voucherTypeName\"\r\n            label=\"证件类型\"\r\n            placeholder=\"请选择证件类型\"\r\n          />\r\n          <van-popup v-model=\"showPickerType\" position=\"bottom\">\r\n            <van-picker\r\n              title=\"证件类型\"\r\n              show-toolbar\r\n              :columns=\"showPickerTypeList.map((item) => item.dicDisplay)\"\r\n              @cancel=\"showPickerType = false\"\r\n              @confirm=\"onConfirmType\"\r\n            />\r\n          </van-popup>\r\n          <van-field\r\n            :readonly=\"userInfo.voucherTypeName === '身份证' || params.disabled\"\r\n            @click=\"\r\n              if (!params.disabled && userInfo.voucherTypeName === '身份证') {\r\n                numberShow = true\r\n              }\r\n            \"\r\n            :clickable=\"!params.disabled\"\r\n            v-model=\"userInfo.voucherCode\"\r\n            name=\"voucherCode\"\r\n            label=\"证件号码\"\r\n            maxlength=\"50\"\r\n            placeholder=\"请填写访客证件号码\"\r\n          />\r\n          <van-number-keyboard\r\n            :show=\"numberShow\"\r\n            extra-key=\"X\"\r\n            close-button-text=\"完成\"\r\n            @blur=\"numberShow = false\"\r\n            @input=\"\r\n              (val) => {\r\n                userInfo.voucherCode = userInfo.voucherCode + val\r\n              }\r\n            \"\r\n            @delete=\"\r\n              userInfo.voucherCode = userInfo.voucherCode.substr(\r\n                0,\r\n                userInfo.voucherCode.length - 1\r\n              )\r\n            \"\r\n          />\r\n          <van-field name=\"visitSex\" label=\"访客性别\">\r\n            <template #input>\r\n              <van-radio-group\r\n                :disabled=\"params.disabled\"\r\n                v-model=\"userInfo.visitSex\"\r\n                direction=\"horizontal\"\r\n              >\r\n                <van-radio\r\n                  :name=\"item.dicValue\"\r\n                  v-for=\"item in visitSexList\"\r\n                  :key=\"item.dicValue\"\r\n                  >{{ item.dicDisplay }}</van-radio\r\n                >\r\n              </van-radio-group>\r\n            </template>\r\n          </van-field>\r\n          <van-field\r\n            v-model=\"userInfo.plate\"\r\n            name=\"plate\"\r\n            label=\"车牌号码\"\r\n            maxlength=\"8\"\r\n            placeholder=\"请填写访客车牌号码\"\r\n          />\r\n          <van-field\r\n            v-model=\"userInfo.carryArticle\"\r\n            name=\"carryArticle\"\r\n            label=\"携带物品\"\r\n            maxlength=\"100\"\r\n            placeholder=\"请填写访客携带物品\"\r\n          />\r\n          <van-field\r\n            v-model=\"userInfo.remark\"\r\n            name=\"remark\"\r\n            label=\"备注\"\r\n            rows=\"2\"\r\n            autosize\r\n            type=\"textarea\"\r\n            show-word-limit\r\n            maxlength=\"100\"\r\n            placeholder=\"请填写备注\"\r\n          />\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  addVisitorInfo,\r\n  modifyVisitorInfo,\r\n  qryVisitorInfoDetail\r\n} from '@/api/visitor' // 新增\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: 'TemporaryVisitorReg',\r\n  data() {\r\n    return {\r\n      numberShow: false, //身份证属性\r\n      showPickerTypeList: [\r\n        {\r\n          dicDisplay: '身份证',\r\n          dicValue: '1'\r\n        },\r\n        {\r\n          dicDisplay: '香港身份证',\r\n          dicValue: '2'\r\n        },\r\n        {\r\n          dicDisplay: '澳门身份证',\r\n          dicValue: '3'\r\n        },\r\n        {\r\n          dicDisplay: '港澳通行证',\r\n          dicValue: '4'\r\n        },\r\n        {\r\n          dicDisplay: '台湾居民定居证',\r\n          dicValue: '5'\r\n        },\r\n        {\r\n          dicDisplay: '其他',\r\n          dicValue: '6'\r\n        }\r\n      ], //身份证类型字典\r\n      visitSexList: [\r\n        {\r\n          dicDisplay: '男',\r\n          dicValue: '0'\r\n        },\r\n        {\r\n          dicDisplay: '女',\r\n          dicValue: '1'\r\n        }\r\n      ], //性别字典\r\n      showPickerType: false, // 类型modal\r\n      showPickerEnd: false, // 结束时间\r\n      visitorInfo: {}, //头表信息\r\n      userInfo: {\r\n        //访客单独信息\r\n        fileList: [],\r\n        name: '',\r\n        visitorPhoneNbr: '',\r\n        voucherTypeName: '身份证',\r\n        voucherCode: '',\r\n        visitSex: '',\r\n        carryArticle: '',\r\n        remark: ''\r\n      },\r\n      params: {} //路由参数\r\n    }\r\n  },\r\n  methods: {\r\n    async init() {\r\n      scrollTo(0, 0)\r\n      this.params = this.$util.getRouteParams(this.$route) // 获取页传入的参数 or 设置参数\r\n      this.userInfo.visitorPhoneNbr = this.params.visitorPhoneNbr\r\n      if (this.params.temporaryVisitId && !this.params.phoneNbrError) {\r\n        qryVisitorInfoDetail({\r\n          visitorInfoId: this.params.temporaryVisitId,\r\n          visitorPhoneNbr: this.params.visitorPhoneNbr,\r\n          visitorOpenid: this.params.openId\r\n        }).then((res) => {\r\n          if (res.code === 200) {\r\n            const data = res.data.row[0]\r\n            //设置头表数据\r\n            this.visitorInfo = {\r\n              ...data,\r\n              visitStartTime: this.$util.format(\r\n                new Date(data.visitStartTime.replace(/-/g, '/')),\r\n                'yyyy-MM-dd hh:mm'\r\n              ),\r\n              visitEndTime: this.$util.format(\r\n                new Date(data.visitEndTime.replace(/-/g, '/')),\r\n                'yyyy-MM-dd hh:mm'\r\n              )\r\n            }\r\n            //设置用户数据\r\n            const visitorPersonArr = eval('(' + data.visitorPersonArr + ')')[0]\r\n            this.userInfo = {\r\n              ...visitorPersonArr,\r\n              fileList: visitorPersonArr.picData\r\n                ? [{ content: visitorPersonArr.picData.replace(/ /g, '+') }]\r\n                : [],\r\n              voucherTypeName: String(\r\n                this.showPickerTypeList.find(\r\n                  (item) => visitorPersonArr.voucherType == item.dicValue\r\n                ).dicDisplay\r\n              )\r\n            }\r\n          } else {\r\n            this.$toast.fail({\r\n              message: res.msg\r\n            })\r\n          }\r\n        })\r\n      } else {\r\n        this.setTime()\r\n      }\r\n    },\r\n    setTime() {\r\n      //设置默认时间\r\n      let time = new Date()\r\n      this.visitorInfo.visitStartTime = this.$util.format(\r\n        time,\r\n        'yyyy-MM-dd hh:mm'\r\n      )\r\n      this.visitorInfo.visitEndTime = this.$util.format(\r\n        new Date(time.setHours(time.getHours() + 2)), //设置默认加两小时\r\n        'yyyy-MM-dd hh:mm'\r\n      )\r\n    },\r\n    onClickLeft() {\r\n      this.$router.back(-1)\r\n    },\r\n    //结束时间确认\r\n    onConfirmEnd(time) {\r\n      this.visitorInfo.visitEndTime = this.$util.format(\r\n        time,\r\n        'yyyy-MM-dd hh:mm'\r\n      )\r\n      this.showPickerEnd = false\r\n    },\r\n    //拜访时间限制范围\r\n    disabledTime(type) {\r\n      switch (type) {\r\n        case 'endMin':\r\n          return (\r\n            this.visitorInfo.visitStartTime &&\r\n            new Date(this.visitorInfo.visitStartTime.replace(/-/g, '/'))\r\n          )\r\n        case 'endMax':\r\n          if (this.visitorInfo.visitStartTime) {\r\n            return new Date(\r\n              Date.parse(this.visitorInfo.visitStartTime.replace(/-/g, '/')) +\r\n                86400000\r\n            )\r\n          }\r\n          return\r\n      }\r\n    },\r\n    // 验证图片格式是否正确和压缩图片\r\n    async beforeRead(file) {\r\n      const isJpgOrPng =\r\n        file.type === 'image/jpeg' ||\r\n        file.type === 'image/png' ||\r\n        file.type === 'mage/jpg'\r\n      if (isJpgOrPng) {\r\n        const img = await this.$util.iosRotateImg(file)\r\n        if (this.$util.isImgChekSize == 0) {\r\n          this.userInfo.picData = img\r\n        } else if (this.$util.isImgChekSize == 1) {\r\n          this.$toast.fail('您选择的相片小于25K，请重新选择相片！')\r\n        } else {\r\n          this.$toast.fail('您选择的相片超过了7500K，请重新选择相片！')\r\n        }\r\n      } else {\r\n        return new Promise((reject) => {\r\n          this.$toast({\r\n            message: '请选择 jpg, png 格式文件!'\r\n          })\r\n          this.userInfo.picData = ''\r\n          return reject(new Error(false))\r\n        })\r\n      }\r\n    },\r\n    //选择证件类型\r\n    onConfirmType(value) {\r\n      this.userInfo.voucherTypeName = value\r\n      this.userInfo.voucherCode = ''\r\n      this.showPickerType = false\r\n    },\r\n    // 保存\r\n    handleSubmit() {\r\n      this.$toast.loading({\r\n        duration: 0,\r\n        forbidClick: true,\r\n        message: '数据保存中...'\r\n      })\r\n      let fun = null\r\n      if (this.params.temporaryVisitId) {\r\n        //修改\r\n        fun = modifyVisitorInfo\r\n      } else {\r\n        // 新增\r\n        fun = addVisitorInfo\r\n      }\r\n      const params = {\r\n        ...this.visitorInfo,\r\n        visitStartTime: this.visitorInfo.visitStartTime + ':00',\r\n        visitEndTime: this.visitorInfo.visitEndTime + ':00',\r\n        visitorInfoId: this.params.temporaryVisitId,\r\n        unitId: this.unitId,\r\n        visitorPhone: this.userInfo.visitorPhoneNbr,\r\n        visitType: '3',\r\n        visitorPersonArr: [\r\n          {\r\n            ...this.userInfo,\r\n            fileList: null,\r\n            voucherType: String(\r\n              this.showPickerTypeList.find(\r\n                (item) => this.userInfo.voucherTypeName === item.dicDisplay\r\n              ).dicValue\r\n            )\r\n          }\r\n        ]\r\n      }\r\n      if (this.params.isToOpenId) {\r\n        params.toOpenid = this.myUserInfo.openId\r\n      } else {\r\n        const openId = this.params.openId\r\n        params.visitorOpenid = openId\r\n        params.visitorPersonArr[0].visitorOpenid = openId\r\n      }\r\n      fun(params)\r\n        .then((res) => {\r\n          this.$toast.clear()\r\n          if (res.code === 200) {\r\n            this.token = res.data.token //设置token\r\n            this.params.temporaryVisitId = res.data.id\r\n            this.$util.getRouteParams({\r\n              name: this.$route.name,\r\n              params: {\r\n                temporaryVisitId: res.data.id, //设置id,\r\n                token: res.data.token //设置token\r\n              }\r\n            }) //  设置参数\r\n            this.$toast.success({\r\n              duration: 200,\r\n              message: res.msg\r\n            })\r\n            //登记成功后再次验证手机号码\r\n            if (!this.params.openId && !this.myUserInfo.openId) {\r\n              this.$router.push({\r\n                name: 'passCertificateTemporary'\r\n              })\r\n            }\r\n          } else {\r\n            this.$toast.fail({\r\n              message: res.msg\r\n            })\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$toast.clear()\r\n        })\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      myUserInfo: (state) => state.user.userInfo, // 用户信息\r\n      unitId: (state) => state.user.unitId\r\n    })\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    if (to.name !== 'passCertificateTemporary') {\r\n      //清除local storage中保存的参数\r\n      this.$ls.remove(from.name)\r\n    }\r\n    next()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.edit-form {\r\n  margin: 17px 10px;\r\n  .tag-title {\r\n    font-size: 15px;\r\n    font-weight: bold;\r\n    margin: 18px 0 15px 0;\r\n    color: rgba(69, 90, 100, 0.6);\r\n  }\r\n  .visitor-info {\r\n    border-radius: 5px;\r\n    overflow: hidden;\r\n    box-shadow: 0 0 10px -7px #cac7c7;\r\n    .van-cell {\r\n      padding: 13px 16px;\r\n    }\r\n    .title-primary {\r\n      div:first-child {\r\n        font-weight: 700;\r\n        font-size: 13px;\r\n      }\r\n      div:last-child {\r\n        font-size: 10px;\r\n        color: #6a6666;\r\n      }\r\n    }\r\n  }\r\n  .van-contact-card::before {\r\n    background: #fff !important;\r\n  }\r\n}\r\n</style>\r\n\r\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","params","disabled","on","onClickLeft","$event","$refs","visitorInfo","submit","staticClass","_v","ref","handleSubmit","required","message","model","value","callback","$$v","$set","expression","showPickerEnd","disabledTime","onConfirmEnd","pattern","scopedSlots","_u","key","fn","beforeRead","userInfo","picData","proxy","showPickerType","showPickerTypeList","map","item","dicDisplay","onConfirmType","voucherTypeName","numberShow","val","voucherCode","substr","length","_l","dicValue","_s","staticRenderFns","component","$","$find","addToUnscopables","FIND","SKIPS_HOLES","Array","target","proto","forced","find","callbackfn","arguments","undefined","name","data","visitSexList","fileList","visitorPhoneNbr","visitSex","carryArticle","remark","methods","setTime","visitStartTime","$util","format","visitEndTime","$router","back","type","Date","$toast","loading","duration","forbidClick","fun","temporaryVisitId","visitorInfoId","unitId","visitorPhone","visitType","visitorPersonArr","isToOpenId","toOpenid","myUserInfo","openId","visitorOpenid","computed","created","init","beforeRouteLeave","to","$ls","remove","from","next"],"sourceRoot":""}